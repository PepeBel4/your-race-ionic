<ion-header>
  <ion-navbar>
    <ion-title>
      Start
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <ion-item>
    <h1>{{ currentTime | date: 'HH:mm:ss' }}</h1>
    <ion-badge>LOCAL TIME</ion-badge>
  </ion-item>

<form>

<ion-item>
  <ion-label>Scheduled for</ion-label>
  <ion-datetime 
    displayFormat="HH:mm:ss" 
    pickerFormat="HH mm ss" 
    (ionChange)="updateSelectedRaces()"  
    [(ngModel)]="race.scheduled_for"
    name="scheduled_for">
  </ion-datetime>
</ion-item>

<ion-item>
  <ion-label>Start Countdown to</ion-label>
  <ion-datetime 
    displayFormat="HH:mm:ss" 
    pickerFormat="HH mm s" 
    (ionChange)="updateSelectedRaces()" 
    initialValue="{{ this.currentTime }}" 
    [(ngModel)]="race.started_at"
    name="started_at">
    </ion-datetime>
</ion-item>

<ion-list radio-group [(ngModel)]="race.aasm_state" name="aasm_state">
  <ion-list-header>
    <h1>Race status</h1>
  </ion-list-header>

<ion-item>
    <ion-label>Scheduled</ion-label>
    <ion-radio value="scheduled" (click)="updateSelectedRaces()"></ion-radio>
  </ion-item>

  <ion-item>
    <ion-label>In progress {{ ongoingFor }} </ion-label>
    <ion-radio value="in_progress" (click)="updateSelectedRaces()"></ion-radio>
    <p>TEST</p>
  </ion-item>

  <ion-item>
    <ion-label>General recall</ion-label>
    <ion-radio value="general_recall" (click)="updateSelectedRaces()"></ion-radio>
  </ion-item>

  <ion-item>
    <ion-label>Postponed</ion-label>
    <ion-radio value="postponed" (click)="updateSelectedRaces()"></ion-radio>
  </ion-item>

  <ion-item>
    <ion-label>Cancelled</ion-label>
    <ion-radio value="cancelled" (click)="updateSelectedRaces()"></ion-radio>
  </ion-item>
</ion-list>

<ion-item class="no-margin">
        <ion-label>Individual recall</ion-label>
        <ion-toggle [(ngModel)]="race.individual_recall" name="individual_recall" (ionChange)="updateSelectedRaces()"></ion-toggle>
    </ion-item>

</form>

  <p *ngFor="let selectedRace of selectedRaces">

    <ion-card>
      <ion-card-header>
        {{ selectedRace.name }}
      </ion-card-header>

    <ion-card-content>

<ion-item>
    <ion-icon color="primary" name="ios-navigate" item-start></ion-icon> <h1> {{ selectedRace.scheduled_for| date: 'HH:mm:ss' }}</h1>
    <ion-badge>{{ selectedRace.aasm_state | uppercase }} </ion-badge>
  </ion-item>

    </ion-card-content>

    <ion-list>
      <button ion-item>
        <ion-icon color="primary" name="ios-navigate" item-start></ion-icon>
        Inner Loop
      </button>
    </ion-list>

    <ion-item>
      <ion-icon color="primary" name="ios-person" item-start></ion-icon>
        Competitors
      <ion-badge item-end>40</ion-badge>
    </ion-item>

    <ion-item>
      <ion-icon color="primary" name="ios-timer" item-start></ion-icon>
        Ongoing 
      <ion-badge item-end>2'34''</ion-badge>
    </ion-item>

    </ion-card>


  </p>

</ion-content>
